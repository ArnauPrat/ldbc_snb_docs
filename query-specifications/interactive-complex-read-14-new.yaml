workload: Interactive
operation: complex
number: 14 new
title: Trusted connection paths (new version)
description: |
  Find a cheapest path between two given *Persons*, in the interaction subgraph. If there are multiple cheapest paths, return any of them can be returned. Do not return any rows if there is no path between the *Persons*.

  The interaction subgraph is based on the *Person*-*knows*-*Person* graph where the *Person* endpoints of each *knows* edge have at least one interaction between them.

  An interaction is defined as a direct reply *Comment* (by one of the *Persons*) to a *Message* (by the other *Person*).

  The edge weights are determined as $\max\lfloor 40 - \sqrt{\textit{numInteractions}}, 1 \rfloor$.
parameters:
  - name: person1Id
    type: ID
  - name: person2Id
    type: ID
result:
  - name: personIdsInPath
    type: '[ID]'
    description: Identifiers representing an ordered sequence of the *Persons* in the path
    category: calculated
  - name: pathWeight
    type: 64-bit Integer
    category: calculated
choke_points: [3.3, 5.3, 7.2, 7.3, 7.5, 7.7, 8.1, 8.2, 8.3, 8.6] #TODO
relevance: |
  This query tests the performance of cheapest path (weighted shortest path) computation.
  It uses integer edge weights to prevent inaccuracies introduced by floating-point number representation to cause differences in query results.
